[全栈缓存时代](https://segmentfault.com/a/1190000005808789)  
[浅谈Web系统设计之缓存](https://www.jianshu.com/p/345f26baa589)   
[大型web系统数据缓存设计](http://data.qq.com/article?id=2879)
# Client-side cache

## window.localStorage/sessionStorage/cookie
## HTML5 service worker
- Require https protocal
- manifest
- progressive web app(offline available)
- cache local file
## HTTP cache
1. Save bandwidth
2. Save server hitting
3. Load faster
### HTML Meta Tag
### HTTP Header
- expires(absolute time) OR max-age(relative time period, will overwrite 'expire')
- cache-control: max-age
- last-modified
- ETag, generated by server, identification
### Step
1. check local cache
2. check if expire
3. make http request
4. receive and cache

# Server-side cache
## Data Type
1. pure static(CDN)
2. pure dynamic (data cache, redis/memcache)
3. static in short period of time
4. have both static and dynamic in the same page
 - 1 cdn static page
 - 2 localstorage save state of dynamic information, such as ad, login status

## CDN
- Cross area and ISP
- reduce traffic on server
- out of sync due to not updating on CDN nodes
## Memcached:
* distributed, same virtual pool of memory: large web server

## Redis
 * Single node redis performance maximum in general: 14k QPS
 * persistence options
	* RDB
		* snapshot into single file 
		* backup and disaster recovery
	* AOF
		* log all the operations
		* better fsync performance
		* more durable
		* bigger/slower than RDB file
* LRU
  * automatically evict old data
  * maxmemory 
  * eviction policies
## Design Pattern
* Cache aside
	* Code kind of maintain two data store(db and cache)
	* Hit: read from cache
	* Miss: read from cache, failed. read from db, update cache
	* Update(lazy load): update db, mark cache as invalid afterwards.
		*  when create new record, put on db but not update cache, until next read.
		*  when update/delete record, put change directly on db, mark cache data as out-of-sync, and load until next time.
* Read through/Write through	
	* as sql proxy
	* cache updates db
	* cache loads new create record from db
* Write behind caching/Write Back
	* only update cache
	* async update db from cache
* trade off between data sync and performance		

 ## File cache
 - Stream(并发读写死锁)
 - CDN
 - Distributed system that have shared file drive mounted

 
 
